{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "Identity Space",
  "required": [
    "kind",
    "code",
    "name",
    "type",
    "variable"
  ],
  "additionalProperties": false,
  "properties": {
    "code": {
      "type": "string",
      "title": "App identity space code"
    },
    "name": {
      "type": "string",
      "title": "App identity space name"
    },
    "description": {
      "type": "string",
      "title": "App identity space description",
      "default": ""
    },
    "type": {
      "type": "string",
      "title": "App identity space filter type",
      "enum": [
        "email",
        "controller_customer_id",
        "android_advertising_id",
        "android_id",
        "fire_advertising_id",
        "ios_advertising_id",
        "ios_vendor_id",
        "microsoft_advertising_id",
        "microsoft_publisher_id",
        "roku_publisher_id",
        "roku_advertising_id",
        "unique_browser",
        "telephone"
      ]
    },
    "format": {
      "type": "string",
      "title": "App identity space filter format",
      "default": "raw",
      "enum": [
        "raw",
        "sha1",
        "sha256",
        "sha512"
      ]
    },
    "variable": {
      "type": "object",
      "title": "Variable definition",
      "required": [
        "location",
        "name"
      ],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "title": "Name of the variable"
        },
        "location": {
          "type": "string",
          "title": "Location of the variable",
          "enum": [
            "window",
            "cookie",
            "dataLayer"
          ]
        },
        "jwt": {
          "type": ["object", "null"],
          "title": "JWT details",
          "required": [
            "location",
            "key"
          ],
          "additionalProperties": false,
          "properties": {
            "location": {
              "type": "string",
              "title": "location to find the variable within the JWT",
              "enum": [
                "header",
                "claims"
              ]
            },
            "key": {
              "type": "string",
              "title": "key of the variable within the JWT"
            }
          }
        }
      }
    }
  }
}
